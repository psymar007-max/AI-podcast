# ğŸš€ æ’­å®¢ç”Ÿæˆ Demo éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆæ¦‚è§ˆ

| æ–¹æ¡ˆ | éš¾åº¦ | æˆæœ¬ | é€‚ç”¨åœºæ™¯ | æ¨èæŒ‡æ•° |
|------|------|------|----------|----------|
| æœ¬åœ°éƒ¨ç½² | â­ | å…è´¹ | ä¸ªäººä½¿ç”¨ã€æ¼”ç¤º | â­â­â­â­â­ |
| Vercel éƒ¨ç½² | â­â­ | å…è´¹ | å°å‹é¡¹ç›®ã€æ¼”ç¤º | â­â­â­â­ |
| äº‘æœåŠ¡å™¨éƒ¨ç½² | â­â­â­ | ä»˜è´¹ | ç”Ÿäº§ç¯å¢ƒã€å›¢é˜Ÿä½¿ç”¨ | â­â­â­ |
| Docker éƒ¨ç½² | â­â­â­â­ | ä»˜è´¹ | ä¼ä¸šçº§ã€å®¹å™¨åŒ– | â­â­â­ |

---

## ğŸ  æ–¹æ¡ˆä¸€ï¼šæœ¬åœ°éƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ï¼‰

### ç¯å¢ƒè¦æ±‚
- macOS ç³»ç»Ÿ
- Node.js 18.0+
- FFmpeg 7.0+

### å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

1. **ä¸‹è½½é¡¹ç›®**
   ```bash
   # å°† æ’­å®¢ç”ŸæˆDemoå®Œæ•´ç‰ˆ æ–‡ä»¶å¤¹å¤åˆ¶åˆ°æœ¬åœ°
   cd æ’­å®¢ç”ŸæˆDemoå®Œæ•´ç‰ˆ
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **å®‰è£… FFmpeg**
   ```bash
   brew install ffmpeg
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # å¤åˆ¶é…ç½®æ–‡ä»¶
   cp config.example.sh config.sh
   
   # ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥
   nano config.sh
   ```

5. **ä¸€é”®å¯åŠ¨**
   ```bash
   ./start.sh
   ```

6. **è®¿é—®åº”ç”¨**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`
   - æˆ–ç›´æ¥æ‰“å¼€ `demo.html` æ–‡ä»¶

### ä¼˜åŠ¿
- âœ… å®Œå…¨å…è´¹
- âœ… éƒ¨ç½²ç®€å•
- âœ… è°ƒè¯•æ–¹ä¾¿
- âœ… æ•°æ®å®‰å…¨

### åŠ£åŠ¿
- âŒ åªèƒ½æœ¬åœ°è®¿é—®
- âŒ éœ€è¦æœ¬åœ°ç¯å¢ƒé…ç½®

---

## â˜ï¸ æ–¹æ¡ˆäºŒï¼šVercel éƒ¨ç½²ï¼ˆæ¨èæ¼”ç¤ºï¼‰

### ç¯å¢ƒè¦æ±‚
- GitHub è´¦å·
- Vercel è´¦å·ï¼ˆå…è´¹ï¼‰

### éƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡é¡¹ç›®**
   ```bash
   # åˆ›å»º vercel.json é…ç½®æ–‡ä»¶
   ```

2. **ä¸Šä¼ åˆ° GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/æ’­å®¢demo.git
   git push -u origin main
   ```

3. **Vercel éƒ¨ç½²**
   - ç™»å½• [Vercel](https://vercel.com)
   - ç‚¹å‡» "New Project"
   - å¯¼å…¥ GitHub ä»“åº“
   - é…ç½®ç¯å¢ƒå˜é‡
   - éƒ¨ç½²

4. **é…ç½®ç¯å¢ƒå˜é‡**
   ```
   MINIMAX_API_KEY=ä½ çš„APIå¯†é’¥
   GROUP_ID=ä½ çš„Group ID
   ```

### ä¼˜åŠ¿
- âœ… å…è´¹é¢åº¦å……è¶³
- âœ… è‡ªåŠ¨ HTTPS
- âœ… å…¨çƒ CDN
- âœ… è‡ªåŠ¨éƒ¨ç½²

### åŠ£åŠ¿
- âŒ éœ€è¦é…ç½®ç¯å¢ƒå˜é‡
- âŒ æŸäº›åŠŸèƒ½å¯èƒ½å—é™

---

## ğŸ–¥ï¸ æ–¹æ¡ˆä¸‰ï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ï¼‰

### æ¨èå¹³å°
- **é˜¿é‡Œäº‘ ECS**ï¼šå›½å†…è®¿é—®å¿«
- **è…¾è®¯äº‘ CVM**ï¼šæ€§ä»·æ¯”é«˜
- **AWS EC2**ï¼šåŠŸèƒ½å¼ºå¤§
- **DigitalOcean**ï¼šç®€å•æ˜“ç”¨

### éƒ¨ç½²æ­¥éª¤ï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰

1. **è´­ä¹°æœåŠ¡å™¨**
   - é€‰æ‹© Ubuntu 20.04 æˆ– CentOS 8
   - é…ç½®ï¼š2æ ¸4G èµ·æ­¥
   - å¸¦å®½ï¼š5Mbps èµ·æ­¥

2. **è¿æ¥æœåŠ¡å™¨**
   ```bash
   ssh root@ä½ çš„æœåŠ¡å™¨IP
   ```

3. **å®‰è£…ç¯å¢ƒ**
   ```bash
   # æ›´æ–°ç³»ç»Ÿ
   apt update && apt upgrade -y
   
   # å®‰è£… Node.js
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   apt-get install -y nodejs
   
   # å®‰è£… FFmpeg
   apt install ffmpeg -y
   
   # å®‰è£… Git
   apt install git -y
   ```

4. **éƒ¨ç½²é¡¹ç›®**
   ```bash
   # å…‹éš†é¡¹ç›®
   git clone https://github.com/ä½ çš„ç”¨æˆ·å/æ’­å®¢demo.git
   cd æ’­å®¢demo
   
   # å®‰è£…ä¾èµ–
   npm install
   
   # é…ç½®ç¯å¢ƒå˜é‡
   nano .env
   ```

5. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # åˆ›å»º .env æ–‡ä»¶
   MINIMAX_API_KEY=ä½ çš„APIå¯†é’¥
   GROUP_ID=ä½ çš„Group ID
   PORT=3000
   ```

6. **ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹**
   ```bash
   # å®‰è£… PM2
   npm install -g pm2
   
   # å¯åŠ¨åº”ç”¨
   pm2 start integrated_server.js --name "æ’­å®¢demo"
   
   # è®¾ç½®å¼€æœºè‡ªå¯
   pm2 startup
   pm2 save
   ```

7. **é…ç½® Nginx åå‘ä»£ç†**
   ```bash
   # å®‰è£… Nginx
   apt install nginx -y
   
   # é…ç½® Nginx
   nano /etc/nginx/sites-available/æ’­å®¢demo
   ```

   ```nginx
   server {
       listen 80;
       server_name ä½ çš„åŸŸåæˆ–IP;
       
       location / {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection 'upgrade';
           proxy_set_header Host $host;
           proxy_cache_bypass $http_upgrade;
       }
   }
   ```

   ```bash
   # å¯ç”¨é…ç½®
   ln -s /etc/nginx/sites-available/æ’­å®¢demo /etc/nginx/sites-enabled/
   nginx -t
   systemctl restart nginx
   ```

8. **é…ç½®é˜²ç«å¢™**
   ```bash
   ufw allow 22
   ufw allow 80
   ufw allow 443
   ufw enable
   ```

### ä¼˜åŠ¿
- âœ… å®Œå…¨æ§åˆ¶
- âœ… æ€§èƒ½ç¨³å®š
- âœ… å¯æ‰©å±•æ€§å¼º
- âœ… æ”¯æŒè‡ªå®šä¹‰åŸŸå

### åŠ£åŠ¿
- âŒ éœ€è¦ä»˜è´¹
- âŒ é…ç½®å¤æ‚
- âŒ éœ€è¦ç»´æŠ¤

---

## ğŸ³ æ–¹æ¡ˆå››ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èä¼ä¸šï¼‰

### ç¯å¢ƒè¦æ±‚
- Docker
- Docker Compose

### éƒ¨ç½²æ­¥éª¤

1. **åˆ›å»º Dockerfile**
   ```dockerfile
   FROM node:18-alpine
   
   WORKDIR /app
   
   COPY package*.json ./
   RUN npm install
   
   COPY . .
   
   EXPOSE 3000
   
   CMD ["node", "integrated_server.js"]
   ```

2. **åˆ›å»º docker-compose.yml**
   ```yaml
   version: '3.8'
   services:
     podcast-demo:
       build: .
       ports:
         - "3000:3000"
       environment:
         - MINIMAX_API_KEY=${MINIMAX_API_KEY}
         - GROUP_ID=${GROUP_ID}
       volumes:
         - ./uploads:/app/uploads
         - ./outputs:/app/outputs
       restart: unless-stopped
   ```

3. **éƒ¨ç½²å‘½ä»¤**
   ```bash
   # æ„å»ºé•œåƒ
   docker-compose build
   
   # å¯åŠ¨æœåŠ¡
   docker-compose up -d
   
   # æŸ¥çœ‹æ—¥å¿—
   docker-compose logs -f
   ```

### ä¼˜åŠ¿
- âœ… ç¯å¢ƒä¸€è‡´
- âœ… æ˜“äºæ‰©å±•
- âœ… ç‰ˆæœ¬ç®¡ç†
- âœ… å¿«é€Ÿéƒ¨ç½²

### åŠ£åŠ¿
- âŒ å­¦ä¹ æˆæœ¬é«˜
- âŒ èµ„æºæ¶ˆè€—å¤§

---

## ğŸ”§ é€šç”¨é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¿…éœ€é…ç½®
MINIMAX_API_KEY=ä½ çš„Minimax APIå¯†é’¥
GROUP_ID=ä½ çš„Minimax Group ID

# å¯é€‰é…ç½®
PORT=3000                    # æœåŠ¡å™¨ç«¯å£
UPLOAD_LIMIT=10MB           # æ–‡ä»¶ä¸Šä¼ é™åˆ¶
AUDIO_FORMAT=mp3            # éŸ³é¢‘è¾“å‡ºæ ¼å¼
AUDIO_BITRATE=128000        # éŸ³é¢‘æ¯”ç‰¹ç‡
AUDIO_SAMPLE_RATE=32000     # éŸ³é¢‘é‡‡æ ·ç‡
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. **å†…å­˜ä¼˜åŒ–**ï¼šè®¾ç½® Node.js å†…å­˜é™åˆ¶
   ```bash
   export NODE_OPTIONS="--max-old-space-size=2048"
   ```

2. **æ–‡ä»¶æ¸…ç†**ï¼šå®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
   ```bash
   # æ·»åŠ åˆ° crontab
   0 2 * * * find /app/uploads -mtime +7 -delete
   0 2 * * * find /app/outputs -mtime +7 -delete
   ```

3. **æ—¥å¿—ç®¡ç†**ï¼šé…ç½®æ—¥å¿—è½®è½¬
   ```bash
   # ä½¿ç”¨ PM2 æ—¥å¿—ç®¡ç†
   pm2 install pm2-logrotate
   ```

### å®‰å…¨é…ç½®
1. **HTTPS é…ç½®**ï¼šä½¿ç”¨ Let's Encrypt
2. **é˜²ç«å¢™é…ç½®**ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£
3. **API å¯†é’¥ä¿æŠ¤**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡
4. **æ–‡ä»¶ä¸Šä¼ é™åˆ¶**ï¼šè®¾ç½®å¤§å°å’Œç±»å‹é™åˆ¶

---

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :3000

# æ€æ­»è¿›ç¨‹
kill -9 è¿›ç¨‹ID
```

### 2. æƒé™é—®é¢˜
```bash
# ä¿®æ”¹æ–‡ä»¶æƒé™
chmod +x start.sh
chmod 755 uploads/
chmod 755 outputs/
```

### 3. å†…å­˜ä¸è¶³
```bash
# å¢åŠ  swap ç©ºé—´
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

### 4. ç½‘ç»œé—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.minimaxi.com

# æ£€æŸ¥ DNS è§£æ
nslookup api.minimaxi.com
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
1. æŸ¥çœ‹é¡¹ç›® README.md
2. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
3. æŸ¥çœ‹å¸¸è§é—®é¢˜
4. æäº¤ Issue

### è”ç³»æ–¹å¼
- é¡¹ç›®åœ°å€ï¼šæ’­å®¢ç”ŸæˆDemoå®Œæ•´ç‰ˆ
- æŠ€æœ¯æ”¯æŒï¼šæŸ¥çœ‹æ—¥å¿—å’Œæ–‡æ¡£
- åŠŸèƒ½å»ºè®®ï¼šæäº¤ Issue

---

**é€‰æ‹©å»ºè®®**ï¼š
- **æ–°æ‰‹ç”¨æˆ·**ï¼šé€‰æ‹©æœ¬åœ°éƒ¨ç½²
- **æ¼”ç¤ºé¡¹ç›®**ï¼šé€‰æ‹© Vercel éƒ¨ç½²
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šé€‰æ‹©äº‘æœåŠ¡å™¨éƒ¨ç½²
- **ä¼ä¸šç”¨æˆ·**ï¼šé€‰æ‹© Docker éƒ¨ç½²

**VIVID VOICE** - è®©æ–‡å­—æ ©æ ©å¦‚"å£°" ğŸ™ï¸
