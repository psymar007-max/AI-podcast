# 🎙️ 播客生成 Demo - VIVID VOICE

> 让文字栩栩如"声" - 基于 AI 的智能播客生成系统

## 📋 项目简介

这是一个基于 AI 技术的智能播客生成系统，能够将文本内容自动转换为专业的播客音频。系统集成了文本解析、AI 脚本生成、语音合成、音色复刻和音效处理等多项功能，为用户提供完整的播客制作解决方案。

### 🎯 核心特色

- **智能内容解析**：支持文本、PDF、网页链接等多种输入方式
- **AI 脚本生成**：使用大语言模型将原始内容转换为播客脚本
- **音色复刻技术**：支持用户上传参考音频进行音色克隆
- **专业音效系统**：自动添加开场和结束音效，提升播客品质
- **多平台兼容**：支持 Minimax TTS 和本地 TTS 双重保障
- **现代化界面**：简洁美观的前端界面，操作便捷

## 🚀 核心功能

### 1. 内容输入与解析
- **文本输入**：直接输入文本内容
- **文件上传**：支持 PDF、TXT、DOC、DOCX 等格式
- **网页链接**：自动抓取网页内容并解析
- **智能解析**：自动提取文本内容，去除格式干扰

### 2. AI 播客脚本生成
- **内容优化**：将原始内容转换为适合播报的脚本
- **风格适配**：根据内容类型调整播客风格（财经、故事等）
- **长度控制**：智能控制播客时长和内容密度
- **口语化处理**：将书面语转换为自然的口语表达

### 3. 语音合成与音色复刻
- **Minimax TTS**：高质量云端语音合成服务
- **音色复刻**：支持用户上传参考音频进行音色克隆
- **本地 TTS 兜底**：当云端服务不可用时自动切换
- **多音色支持**：内置多种音色供选择

### 4. 专业音效系统
- **开场音效**：自动添加专业的播客开场音乐
- **结束音效**：自动添加播客结束音乐
- **音效合并**：使用 FFmpeg 进行高质量音频合并
- **格式转换**：支持多种音频格式输出

### 5. 用户界面
- **现代化设计**：简洁美观的白色主题界面
- **实时反馈**：显示处理进度和状态信息
- **文件管理**：支持文件上传、预览和移除
- **音频播放**：内置音频播放器和下载功能

## 📁 项目结构

```
播客生成Demo完整版/
├── README.md                    # 项目说明文档
├── package.json                 # Node.js 依赖配置
├── demo.html                    # 前端界面文件
├── integrated_server.js         # 主服务器文件
├── extractPDFText.js           # PDF 解析服务
├── text_to_draft_doubao.js     # AI 脚本生成服务
├── 播客demo核心文件/            # 核心功能模块
│   ├── 音色复刻.js             # 音色克隆功能
│   └── gen_voice.js            # 语音合成功能
└── assets/                     # 系统资源文件
    ├── intro.mp3              # 开场音效
    └── outro.mp3              # 结束音效
```

## 🛠️ 技术架构

### 前端技术
- **HTML5 + CSS3**：现代化响应式界面
- **JavaScript ES6+**：原生 JavaScript，无框架依赖
- **Fetch API**：异步数据请求
- **File API**：文件上传和处理

### 后端技术
- **Node.js**：JavaScript 运行时环境
- **Express.js**：Web 应用框架
- **Multer**：文件上传中间件
- **FFmpeg**：音频处理和合并
- **fluent-ffmpeg**：FFmpeg Node.js 封装

### AI 服务集成
- **Minimax API**：语音合成和音色克隆
- **大语言模型**：播客脚本生成
- **PDF 解析**：文档内容提取

### 音频处理
- **macOS say**：本地 TTS 服务
- **音频格式转换**：AIFF、MP3、M4A 等
- **音效合并**：多轨道音频合成

## 🚀 快速开始

### 环境要求
- **Node.js** 18.0 或更高版本
- **FFmpeg** 7.0 或更高版本
- **macOS** 系统（支持本地 TTS）

### 安装步骤

1. **克隆项目**
   ```bash
   cd 播客生成Demo完整版
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **安装 FFmpeg**（macOS）
   ```bash
   brew install ffmpeg
   ```

4. **配置环境变量**
   ```bash
   export MINIMAX_API_KEY="你的Minimax API密钥"
   export GROUP_ID="你的Minimax Group ID"
   ```

5. **启动服务器**
   ```bash
   node integrated_server.js
   ```

6. **打开前端界面**
   - 在浏览器中打开 `demo.html`
   - 或访问 `http://localhost:3000`

### 使用说明

1. **输入内容**
   - 直接在文本框中输入内容
   - 或上传文件（PDF、TXT 等）
   - 或粘贴网页链接

2. **音色设置**（可选）
   - 上传参考音频文件
   - 系统将自动进行音色复刻

3. **生成播客**
   - 点击"生成音频"按钮
   - 等待处理完成
   - 播放和下载生成的播客

## 🔧 配置说明

### API 密钥配置
```bash
# Minimax API 配置
MINIMAX_API_KEY="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."
GROUP_ID="1956929272627073130"
```

### 服务器配置
- **端口**：3000
- **文件上传限制**：10MB
- **支持格式**：PDF、TXT、DOC、DOCX、音频文件

### 音效配置
- **开场音效**：`assets/intro.mp3`
- **结束音效**：`assets/outro.mp3`
- **自动合并**：系统自动检测并合并音效

## 📊 功能特性

### ✅ 已实现功能
- [x] 多格式文件解析
- [x] AI 播客脚本生成
- [x] 音色复刻技术
- [x] 系统音效自动添加
- [x] 本地 TTS 兜底
- [x] 现代化用户界面
- [x] 实时进度反馈
- [x] 音频播放和下载

### 🔄 处理流程
1. **内容输入** → 用户输入文本/文件/链接
2. **内容解析** → 提取纯文本内容
3. **脚本生成** → AI 生成播客脚本
4. **音色复刻** → 处理参考音频（如有）
5. **语音合成** → 生成音频文件
6. **音效合并** → 添加开场和结束音效
7. **输出结果** → 完整的播客音频

## 🎨 界面设计

### 设计理念
- **简洁现代**：白色主题，清爽界面
- **用户友好**：直观的操作流程
- **响应式设计**：适配不同屏幕尺寸
- **品牌标识**：VIVID VOICE 品牌元素

### 主要界面
- **输入区域**：文本输入、文件上传、链接输入
- **文件管理**：显示已上传的文件和音频
- **进度显示**：实时显示处理进度
- **结果区域**：音频播放器和下载按钮

## 🔍 故障排除

### 常见问题

1. **FFmpeg 未找到**
   ```bash
   brew install ffmpeg
   ```

2. **API 密钥错误**
   - 检查 MINIMAX_API_KEY 是否正确
   - 确认 GROUP_ID 是否有效

3. **文件上传失败**
   - 检查文件大小是否超过 10MB
   - 确认文件格式是否支持

4. **音频生成失败**
   - 检查网络连接
   - 查看服务器日志

### 日志查看
```bash
# 查看服务器日志
node integrated_server.js

# 常见日志信息
[JOB xxx] 开始解析文件
[JOB xxx] 播客脚本生成完成
[JOB xxx] 开始生成音频
[JOB xxx] 系统音效合并完成
```

## 📈 性能优化

### 优化措施
- **异步处理**：非阻塞式任务处理
- **文件缓存**：临时文件自动清理
- **错误恢复**：多级错误处理机制
- **资源管理**：内存和磁盘空间优化

### 性能指标
- **处理速度**：平均 30-60 秒生成完整播客
- **文件大小**：支持最大 10MB 输入文件
- **并发处理**：支持多用户同时使用
- **音频质量**：128kbps AAC 编码

## 🤝 贡献指南

### 开发环境
1. Fork 项目
2. 创建功能分支
3. 提交代码更改
4. 发起 Pull Request

### 代码规范
- 使用 ES6+ 语法
- 添加适当的注释
- 遵循命名规范
- 进行错误处理

## 📄 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- **项目地址**：播客生成Demo完整版
- **技术支持**：查看 README 和日志文件
- **功能建议**：提交 Issue 或 Pull Request

---

**VIVID VOICE** - 让文字栩栩如"声" 🎙️
